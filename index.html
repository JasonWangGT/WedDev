<!DOCTYPE html>
<html>
    <head>
        <title>Calculator website!</title>
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="jquery-ui.css">
        <script src="jquery-3.2.1.min.js"></script>
        <script src="jquery-ui.js"></script>
        <script>
            $(document).ready(function() {
        
//                $("#clear").appendTo("#area");
                $(".operator-btn").draggable({
                    helper: "clone",
                    cursor: 'move',
                });
                
                var res = 0;
                $("#area").droppable({
                    drop: function (event, ui) {
                        draggableID = ui.draggable[0].id;
                        $( "#area" ).empty();
                        var $canvas = $(this);

                        if(draggableID == 'doSthComplicated')
                        {
                            console.log("do something doSthComplicated");
                            $canvas.append('<input type="text" id="input6" class="input" name="fname">');
                        }
                        else
                        {
                            $canvas.append('<input type="text" id="input1" class="input" name="fname">');
                            $canvas.append('<input type="text" id="input2" class="input" name="fname">');

                            var $btn = $('<button/>')
                                .text(draggableID)
                                .click(function () {
                                    num1 = parseInt($('#input1').val(), 10);
                                    num2 = parseInt($('#input2').val(), 10);
                                    var res;

                                    if($('.operator-btn').attr('id') == 'add-btn')
                                    {
                                        res = num1 + num2;
                                    }
                                    else if($('.operator-btn').attr('id') == 'subtract-btn')
                                    {
                                        res = num1 - num2;
                                    }
                                    else if($('.operator-btn').attr('id') == 'foo-btn')
                                    {
                                        res = $('#input1').val() + $('#input2').val();
                                    }
                                    else
                                    {
                                        console.log('else');
                                    }
                                    $('#area').append('<div id="result">' + res + '</div');
                                });
                            $btn.attr('id', draggableID + '-btn');
                            $btn.addClass('operator-btn');
                            $canvas.append($btn);


                            // var $canvasElement = ui.draggable.clone();
                            // $canvasElement.addClass('canvas-element');
                            // $canvasElement.draggable({
                            //     containment: '#container'
                            // });
                            // $canvasElement.attr('id', $('.operator-btn').attr('id') + '-btn');
                            // $canvas.append($canvasElement);
                        }

                        // if (!ui.draggable.hasClass('canvas-element')) {
                        //     var $canvasElement = ui.draggable.clone();
                        //     $canvasElement.addClass('canvas-element');
                        //     $canvasElement.draggable({
                        //         containment: '#container'
                        //     });
                        //     $canvas.append($canvasElement);
                        // }
                    }  
                });
                
                $("button").click(function(){
                    $( "#area" ).empty();
                });


            });

            
        </script>
    </head>

    
    
    <body>
        <div id="area">
            <div id="result"></div>
        </div>
        <div id="operation-panel">
            <div id="add" class="operator-btn"><p>add</p></div>
            <div id="subtract" class="operator-btn"><p>subtract</p></div>
            <div id="foo" class="operator-btn"><p>foo</p></div>
            <div id="dosthcomplicated" class="operator-btn"><p>DoSthComplicated</p></div>
            <button id="clear">clear</button>
        </div>
    </body>

</html>